<!DOCTYPE html>
<html>
<head>
  <title>SPortal PREMIUM</title>
  <style>
    /* ... Your existing styles here ... */
    /* (Use your full styles as needed) */
  </style>
</head>
<body>
  <header id="siteHeader">Scripture Developer Portal</header>

  <main id="portalScreen" class="portal">
    <button onclick="openSection('html')">Enter HTML Site Creator (Works 100%)</button>
    <button onclick="openSection('lua')">Enter Lua Script Uploader (Works 100%)</button>
  </main>

  <main id="htmlSection" class="hidden">
    <button onclick="goBack()">← Back</button>
    <textarea id="htmlCode" placeholder="Paste your HTML code here..."></textarea>
    <button onclick="saveHTML()">Generate Site</button>
    <input type="text" id="htmlOutputLink" readonly placeholder="Your site link will appear here...">
  </main>

  <main id="luaSection" class="hidden">
    <button onclick="goBack()">← Back</button>
    <textarea id="luaCode" placeholder="Input your Lua Code here..."></textarea>
    <button onclick="saveLua()">Create</button>
    <input type="text" id="luaOutputLink" readonly placeholder="Your Lua script link will appear here...">
  </main>

  <script>
    // In-memory storage ONLY (will reset on page reload)
    const htmlData = {};
    const luaData = {};

    // Generates random string of given length
    function generateID(length = 8) {
      const chars = 'abcdefghijklmnopqrstuvwxyz0123456789';
      let result = '';
      for(let i = 0; i < length; i++) {
        result += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      return result;
    }

    function openSection(section) {
      document.getElementById('portalScreen').classList.add('hidden');
      document.getElementById('siteHeader').textContent =
        section === 'html' ? 'HTML Site Generator' :
        section === 'lua' ? 'Lua Script Uploader' :
        'Scripture Developer Portal';
      document.getElementById(section + 'Section').classList.remove('hidden');
    }

    function goBack() {
      ['htmlSection', 'luaSection'].forEach(id => {
        document.getElementById(id).classList.add('hidden');
      });
      document.getElementById('portalScreen').classList.remove('hidden');
      document.getElementById('siteHeader').textContent = "Scripture Developer Portal";
    }

    function saveHTML() {
      const code = document.getElementById('htmlCode').value.trim();
      if (!code) return alert("Please enter some HTML code.");

      const id = generateID();
      htmlData[id] = code;

      const link = location.origin + location.pathname + "#html_" + id;
      document.getElementById('htmlOutputLink').value = link;
    }

    function saveLua() {
      const code = document.getElementById('luaCode').value.trim();
      if (!code) return alert("Please enter Lua code.");

      const id = generateID();
      luaData[id] = code;

      const link = location.origin + location.pathname + "#lua_" + id;
      document.getElementById('luaOutputLink').value = link;
    }

    window.addEventListener('load', () => {
      const hash = location.hash;

      if (hash.startsWith("#html_")) {
        const id = hash.slice(6);
        const code = htmlData[id];
        if (code) {
          document.open();
          document.write(code);
          document.close();
        } else {
          document.body.innerHTML = "<h2 style='color:red;text-align:center;margin-top:50px;'>404 - HTML Site Not Found (page reload cleared memory)</h2>";
        }
      } else if (hash.startsWith("#lua_")) {
        const id = hash.slice(5);
        const code = luaData[id];
        if (code) {
          document.body.innerHTML = `
            <header style="background:#111;padding:15px;color:#0f0;">Lua Script</header>
            <div style="margin:20px auto;max-width:800px;font-family:monospace;color:#00ffcc;background:#141414;padding:15px;border-radius:8px;white-space:pre-wrap;">${code.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</div>
          `;
        } else {
          document.body.innerHTML = "<h2 style='color:red;text-align:center;margin-top:50px;'>404 - Lua Script Not Found (page reload cleared memory)</h2>";
        }
      }
    });
  </script>
</body>
</html>
